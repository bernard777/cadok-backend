{
  "timestamp": "2025-08-05T16:40:10.520Z",
  "summary": {
    "totalTests": 0,
    "passedTests": 0,
    "failedTests": 0,
    "successRate": 0,
    "duration": "27s"
  },
  "suites": [
    {
      "name": "complete-user-journey.test.js",
      "status": "failed",
      "error": "Command failed: npm test -- tests/e2e/complete-user-journey.test.js --verbose --coverage\n● Validation Warning:\n\n  Unknown option \"testTimeout\" with value 60000 was found.\n  This is probably a typing mistake. Fixing it will remove this message.\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\nFAIL e2e-tests tests/e2e/complete-user-journey.test.js\n  ● Test suite failed to run\n\n    Cannot find module '../app' from 'tests/e2e/complete-user-journey.test.js'\n\n    \u001b[0m \u001b[90m  6 |\u001b[39m \u001b[36mconst\u001b[39m request \u001b[33m=\u001b[39m require(\u001b[32m'supertest'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m  7 |\u001b[39m \u001b[36mconst\u001b[39m mongoose \u001b[33m=\u001b[39m require(\u001b[32m'mongoose'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m  8 |\u001b[39m \u001b[36mconst\u001b[39m app \u001b[33m=\u001b[39m require(\u001b[32m'../app'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m  9 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mUser\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../models/User'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mObject\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../models/Object'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 11 |\u001b[39m \u001b[36mconst\u001b[39m \u001b[33mTrade\u001b[39m \u001b[33m=\u001b[39m require(\u001b[32m'../models/Trade'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Resolver._throwModNotFoundError (../node_modules/jest-cli/node_modules/jest-resolve/build/resolver.js:427:11)\n      at Object.require (tests/e2e/complete-user-journey.test.js:8:13)\n\nFailed to collect coverage from C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js\nERROR: C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js: Missing semicolon. (23:7)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m \u001b[90m   * Créer une caution pour un troc (les 2 utilisateurs versent une petite caution)\u001b[39m\n \u001b[90m 22 |\u001b[39m \u001b[90m   */\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[36masync\u001b[39m createTradeGuarantee(tradeId\u001b[33m,\u001b[39m userId\u001b[33m,\u001b[39m paymentMethodId\u001b[33m,\u001b[39m customAmount \u001b[33m=\u001b[39m \u001b[36mnull\u001b[39m) {\n \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 24 |\u001b[39m     \u001b[36mtry\u001b[39m {\n \u001b[90m 25 |\u001b[39m       \u001b[36mconst\u001b[39m trade \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTrade\u001b[39m\u001b[33m.\u001b[39mfindById(tradeId)\u001b[33m;\u001b[39m\n \u001b[90m 26 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mtrade) {\u001b[0m\nSTACK: SyntaxError: C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js: Missing semicolon. (23:7)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m \u001b[90m   * Créer une caution pour un troc (les 2 utilisateurs versent une petite caution)\u001b[39m\n \u001b[90m 22 |\u001b[39m \u001b[90m   */\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[36masync\u001b[39m createTradeGuarantee(tradeId\u001b[33m,\u001b[39m userId\u001b[33m,\u001b[39m paymentMethodId\u001b[33m,\u001b[39m customAmount \u001b[33m=\u001b[39m \u001b[36mnull\u001b[39m) {\n \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 24 |\u001b[39m     \u001b[36mtry\u001b[39m {\n \u001b[90m 25 |\u001b[39m       \u001b[36mconst\u001b[39m trade \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTrade\u001b[39m\u001b[33m.\u001b[39mfindById(tradeId)\u001b[33m;\u001b[39m\n \u001b[90m 26 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mtrade) {\u001b[0m\n    at constructor (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:367:19)\n    at Parser.raise (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:6627:19)\n    at Parser.semicolon (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:6923:10)\n    at Parser.parseExpressionStatement (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13285:10)\n    at Parser.parseStatementContent (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12899:19)\n    at Parser.parseStatementLike (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12767:17)\n    at Parser.parseStatementListItem (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12747:17)\n    at Parser.parseBlockOrModuleBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13316:61)\n    at Parser.parseBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13309:10)\n    at Parser.parseBlock (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13297:10)\n    at Parser.parseFunctionBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12101:24)\n    at Parser.parseFunctionBodyAndFinish (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12087:10)\n    at Parser.parseMethod (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12045:31)\n    at Parser.pushClassMethod (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13727:30)\n    at Parser.parseClassMemberWithIsStatic (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13638:14)\n    at Parser.parseClassMember (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13563:10)\n    at C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13517:14\n    at Parser.withSmartMixTopicForbiddingContext (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12404:14)\n    at Parser.parseClassBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13499:10)\n    at Parser.parseClass (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13474:22)\n    at Parser.parseStatementContent (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12794:21)\n    at Parser.parseStatementLike (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12767:17)\n    at Parser.parseModuleItem (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12744:17)\n    at Parser.parseBlockOrModuleBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13316:36)\n    at Parser.parseBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13309:10)\n    at Parser.parseProgram (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12625:10)\n    at Parser.parseTopLevel (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12615:25)\n    at Parser.parse (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:14492:10)\n    at parse (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:14526:38)\n    at parser (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\parser\\index.js:41:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transformation\\normalize-file.js:64:37)\n    at normalizeFile.next (<anonymous>)\n    at run (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transformation\\index.js:22:50)\n    at run.next (<anonymous>)\n    at transform (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transform.js:22:33)\n    at transform.next (<anonymous>)\n    at step (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:261:32)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:273:13\n    at async.call.result.err.err (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:223:11)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:189:28\n    at C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\gensync-utils\\async.js:67:7\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:113:33\n    at step (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:287:14)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:273:13\n    at async.call.result.err.err (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:223:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\nJest: \"global\" coverage threshold for statements (80%) not met: 0%\nJest: \"global\" coverage threshold for branches (80%) not met: 0%\nJest: \"global\" coverage threshold for lines (80%) not met: 0%\nJest: \"global\" coverage threshold for functions (80%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for statements (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for branches (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for lines (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for functions (85%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for statements (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for branches (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for lines (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for functions (90%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for statements (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for branches (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for lines (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for functions (85%) not met: 0%\nJest: Coverage data for ./services/securityService.js was not found.\nTest Suites: 1 failed, 1 total\nTests:       0 total\nSnapshots:   0 total\nTime:        6.729 s\nRan all test suites matching /tests\\\\e2e\\\\complete-user-journey.test.js/i.\nnpm error Lifecycle script `test` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\JB\\Music\\cadok-backend\nnpm error workspace cadok-backend@1.0.0\nnpm error location C:\\Users\\JB\\Music\\cadok-backend\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c cross-env NODE_ENV=test jest tests/e2e/complete-user-journey.test.js --verbose --coverage\n"
    },
    {
      "name": "security-flows.test.js",
      "status": "failed",
      "error": "Command failed: npm test -- tests/e2e/security-flows.test.js --verbose --coverage\n● Validation Warning:\n\n  Unknown option \"testTimeout\" with value 60000 was found.\n  This is probably a typing mistake. Fixing it will remove this message.\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\nFAIL e2e-tests tests/e2e/security-flows.test.js\n  ● Test suite failed to run\n\n    TypeError: require(...) is not a function\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m stripe \u001b[33m=\u001b[39m require(\u001b[32m'stripe'\u001b[39m)(process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mSTRIPE_SECRET_KEY\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mPaymentService\u001b[39m {\n     \u001b[90m 4 |\u001b[39m   constructor() {\u001b[0m\n\n      at Object.<anonymous> (services/paymentService.js:1:33)\n      at Object.require (routes/payments.js:3:24)\n      at Object.require (app.js:61:23)\n      at Object.require (tests/e2e/security-flows.test.js:7:13)\n\nFailed to collect coverage from C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js\nERROR: C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js: Missing semicolon. (23:7)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m \u001b[90m   * Créer une caution pour un troc (les 2 utilisateurs versent une petite caution)\u001b[39m\n \u001b[90m 22 |\u001b[39m \u001b[90m   */\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[36masync\u001b[39m createTradeGuarantee(tradeId\u001b[33m,\u001b[39m userId\u001b[33m,\u001b[39m paymentMethodId\u001b[33m,\u001b[39m customAmount \u001b[33m=\u001b[39m \u001b[36mnull\u001b[39m) {\n \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 24 |\u001b[39m     \u001b[36mtry\u001b[39m {\n \u001b[90m 25 |\u001b[39m       \u001b[36mconst\u001b[39m trade \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTrade\u001b[39m\u001b[33m.\u001b[39mfindById(tradeId)\u001b[33m;\u001b[39m\n \u001b[90m 26 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mtrade) {\u001b[0m\nSTACK: SyntaxError: C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js: Missing semicolon. (23:7)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m \u001b[90m   * Créer une caution pour un troc (les 2 utilisateurs versent une petite caution)\u001b[39m\n \u001b[90m 22 |\u001b[39m \u001b[90m   */\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[36masync\u001b[39m createTradeGuarantee(tradeId\u001b[33m,\u001b[39m userId\u001b[33m,\u001b[39m paymentMethodId\u001b[33m,\u001b[39m customAmount \u001b[33m=\u001b[39m \u001b[36mnull\u001b[39m) {\n \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 24 |\u001b[39m     \u001b[36mtry\u001b[39m {\n \u001b[90m 25 |\u001b[39m       \u001b[36mconst\u001b[39m trade \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTrade\u001b[39m\u001b[33m.\u001b[39mfindById(tradeId)\u001b[33m;\u001b[39m\n \u001b[90m 26 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mtrade) {\u001b[0m\n    at constructor (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:367:19)\n    at Parser.raise (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:6627:19)\n    at Parser.semicolon (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:6923:10)\n    at Parser.parseExpressionStatement (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13285:10)\n    at Parser.parseStatementContent (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12899:19)\n    at Parser.parseStatementLike (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12767:17)\n    at Parser.parseStatementListItem (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12747:17)\n    at Parser.parseBlockOrModuleBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13316:61)\n    at Parser.parseBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13309:10)\n    at Parser.parseBlock (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13297:10)\n    at Parser.parseFunctionBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12101:24)\n    at Parser.parseFunctionBodyAndFinish (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12087:10)\n    at Parser.parseMethod (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12045:31)\n    at Parser.pushClassMethod (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13727:30)\n    at Parser.parseClassMemberWithIsStatic (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13638:14)\n    at Parser.parseClassMember (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13563:10)\n    at C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13517:14\n    at Parser.withSmartMixTopicForbiddingContext (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12404:14)\n    at Parser.parseClassBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13499:10)\n    at Parser.parseClass (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13474:22)\n    at Parser.parseStatementContent (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12794:21)\n    at Parser.parseStatementLike (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12767:17)\n    at Parser.parseModuleItem (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12744:17)\n    at Parser.parseBlockOrModuleBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13316:36)\n    at Parser.parseBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13309:10)\n    at Parser.parseProgram (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12625:10)\n    at Parser.parseTopLevel (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12615:25)\n    at Parser.parse (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:14492:10)\n    at parse (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:14526:38)\n    at parser (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\parser\\index.js:41:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transformation\\normalize-file.js:64:37)\n    at normalizeFile.next (<anonymous>)\n    at run (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transformation\\index.js:22:50)\n    at run.next (<anonymous>)\n    at transform (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transform.js:22:33)\n    at transform.next (<anonymous>)\n    at step (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:261:32)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:273:13\n    at async.call.result.err.err (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:223:11)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:189:28\n    at C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\gensync-utils\\async.js:67:7\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:113:33\n    at step (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:287:14)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:273:13\n    at async.call.result.err.err (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:223:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\nJest: \"global\" coverage threshold for statements (80%) not met: 0%\nJest: \"global\" coverage threshold for branches (80%) not met: 0%\nJest: \"global\" coverage threshold for lines (80%) not met: 0%\nJest: \"global\" coverage threshold for functions (80%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for statements (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for branches (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for lines (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for functions (85%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for statements (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for branches (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for lines (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for functions (90%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for statements (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for branches (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for lines (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for functions (85%) not met: 0%\nJest: Coverage data for ./services/securityService.js was not found.\nTest Suites: 1 failed, 1 total\nTests:       0 total\nSnapshots:   0 total\nTime:        8.3 s\nRan all test suites matching /tests\\\\e2e\\\\security-flows.test.js/i.\nnpm error Lifecycle script `test` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\JB\\Music\\cadok-backend\nnpm error workspace cadok-backend@1.0.0\nnpm error location C:\\Users\\JB\\Music\\cadok-backend\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c cross-env NODE_ENV=test jest tests/e2e/security-flows.test.js --verbose --coverage\n"
    },
    {
      "name": "payment-flows.test.js",
      "status": "failed",
      "error": "Command failed: npm test -- tests/e2e/payment-flows.test.js --verbose --coverage\n● Validation Warning:\n\n  Unknown option \"testTimeout\" with value 60000 was found.\n  This is probably a typing mistake. Fixing it will remove this message.\n\n  Configuration Documentation:\n  https://jestjs.io/docs/configuration\n\nFAIL e2e-tests tests/e2e/payment-flows.test.js\n  ● Test suite failed to run\n\n    TypeError: require(...) is not a function\n\n    \u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 1 |\u001b[39m \u001b[36mconst\u001b[39m stripe \u001b[33m=\u001b[39m require(\u001b[32m'stripe'\u001b[39m)(process\u001b[33m.\u001b[39menv\u001b[33m.\u001b[39m\u001b[33mSTRIPE_SECRET_KEY\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m   |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 2 |\u001b[39m\n     \u001b[90m 3 |\u001b[39m \u001b[36mclass\u001b[39m \u001b[33mPaymentService\u001b[39m {\n     \u001b[90m 4 |\u001b[39m   constructor() {\u001b[0m\n\n      at Object.<anonymous> (services/paymentService.js:1:33)\n      at Object.require (routes/payments.js:3:24)\n      at Object.require (app.js:61:23)\n      at Object.require (tests/e2e/payment-flows.test.js:7:13)\n\nFailed to collect coverage from C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js\nERROR: C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js: Missing semicolon. (23:7)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m \u001b[90m   * Créer une caution pour un troc (les 2 utilisateurs versent une petite caution)\u001b[39m\n \u001b[90m 22 |\u001b[39m \u001b[90m   */\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[36masync\u001b[39m createTradeGuarantee(tradeId\u001b[33m,\u001b[39m userId\u001b[33m,\u001b[39m paymentMethodId\u001b[33m,\u001b[39m customAmount \u001b[33m=\u001b[39m \u001b[36mnull\u001b[39m) {\n \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 24 |\u001b[39m     \u001b[36mtry\u001b[39m {\n \u001b[90m 25 |\u001b[39m       \u001b[36mconst\u001b[39m trade \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTrade\u001b[39m\u001b[33m.\u001b[39mfindById(tradeId)\u001b[33m;\u001b[39m\n \u001b[90m 26 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mtrade) {\u001b[0m\nSTACK: SyntaxError: C:\\Users\\JB\\Music\\cadok-backend\\services\\escrowService.backup.js: Missing semicolon. (23:7)\n\n\u001b[0m \u001b[90m 21 |\u001b[39m \u001b[90m   * Créer une caution pour un troc (les 2 utilisateurs versent une petite caution)\u001b[39m\n \u001b[90m 22 |\u001b[39m \u001b[90m   */\u001b[39m\n\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 23 |\u001b[39m   \u001b[36masync\u001b[39m createTradeGuarantee(tradeId\u001b[33m,\u001b[39m userId\u001b[33m,\u001b[39m paymentMethodId\u001b[33m,\u001b[39m customAmount \u001b[33m=\u001b[39m \u001b[36mnull\u001b[39m) {\n \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n \u001b[90m 24 |\u001b[39m     \u001b[36mtry\u001b[39m {\n \u001b[90m 25 |\u001b[39m       \u001b[36mconst\u001b[39m trade \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[33mTrade\u001b[39m\u001b[33m.\u001b[39mfindById(tradeId)\u001b[33m;\u001b[39m\n \u001b[90m 26 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mtrade) {\u001b[0m\n    at constructor (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:367:19)\n    at Parser.raise (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:6627:19)\n    at Parser.semicolon (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:6923:10)\n    at Parser.parseExpressionStatement (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13285:10)\n    at Parser.parseStatementContent (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12899:19)\n    at Parser.parseStatementLike (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12767:17)\n    at Parser.parseStatementListItem (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12747:17)\n    at Parser.parseBlockOrModuleBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13316:61)\n    at Parser.parseBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13309:10)\n    at Parser.parseBlock (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13297:10)\n    at Parser.parseFunctionBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12101:24)\n    at Parser.parseFunctionBodyAndFinish (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12087:10)\n    at Parser.parseMethod (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12045:31)\n    at Parser.pushClassMethod (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13727:30)\n    at Parser.parseClassMemberWithIsStatic (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13638:14)\n    at Parser.parseClassMember (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13563:10)\n    at C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13517:14\n    at Parser.withSmartMixTopicForbiddingContext (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12404:14)\n    at Parser.parseClassBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13499:10)\n    at Parser.parseClass (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13474:22)\n    at Parser.parseStatementContent (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12794:21)\n    at Parser.parseStatementLike (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12767:17)\n    at Parser.parseModuleItem (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12744:17)\n    at Parser.parseBlockOrModuleBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13316:36)\n    at Parser.parseBlockBody (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:13309:10)\n    at Parser.parseProgram (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12625:10)\n    at Parser.parseTopLevel (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:12615:25)\n    at Parser.parse (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:14492:10)\n    at parse (C:\\Users\\JB\\Music\\node_modules\\@babel\\parser\\lib\\index.js:14526:38)\n    at parser (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\parser\\index.js:41:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transformation\\normalize-file.js:64:37)\n    at normalizeFile.next (<anonymous>)\n    at run (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transformation\\index.js:22:50)\n    at run.next (<anonymous>)\n    at transform (C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\transform.js:22:33)\n    at transform.next (<anonymous>)\n    at step (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:261:32)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:273:13\n    at async.call.result.err.err (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:223:11)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:189:28\n    at C:\\Users\\JB\\Music\\node_modules\\@babel\\core\\lib\\gensync-utils\\async.js:67:7\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:113:33\n    at step (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:287:14)\n    at C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:273:13\n    at async.call.result.err.err (C:\\Users\\JB\\Music\\node_modules\\gensync\\index.js:223:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\nJest: \"global\" coverage threshold for statements (80%) not met: 0%\nJest: \"global\" coverage threshold for branches (80%) not met: 0%\nJest: \"global\" coverage threshold for lines (80%) not met: 0%\nJest: \"global\" coverage threshold for functions (80%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for statements (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for branches (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for lines (85%) not met: 0%\nJest: \"./routes/objects.js\" coverage threshold for functions (85%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for statements (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for branches (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for lines (90%) not met: 0%\nJest: \"./services/deliveryLabelService.js\" coverage threshold for functions (90%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for statements (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for branches (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for lines (85%) not met: 0%\nJest: \"./services/bidirectionalTradeService.js\" coverage threshold for functions (85%) not met: 0%\nJest: Coverage data for ./services/securityService.js was not found.\nTest Suites: 1 failed, 1 total\nTests:       0 total\nSnapshots:   0 total\nTime:        6.053 s\nRan all test suites matching /tests\\\\e2e\\\\payment-flows.test.js/i.\nnpm error Lifecycle script `test` failed with error:\nnpm error code 1\nnpm error path C:\\Users\\JB\\Music\\cadok-backend\nnpm error workspace cadok-backend@1.0.0\nnpm error location C:\\Users\\JB\\Music\\cadok-backend\nnpm error command failed\nnpm error command C:\\WINDOWS\\system32\\cmd.exe /d /s /c cross-env NODE_ENV=test jest tests/e2e/payment-flows.test.js --verbose --coverage\n"
    }
  ],
  "recommendations": [
    {
      "type": "success",
      "message": "🎉 Tous les tests E2E passent - Prêt pour la bêta !",
      "action": "Procéder au déploiement"
    }
  ]
}